# 杨松霖

## 联系方式
- 手机 : 18380446824
- Email : 424237052@qq.com

## 个人信息
- 杨松霖／男／1994
- 本科／成都信息工程大学／计算机科学与技术／2016年毕业

## 专业能力
- 熟悉常用算法和数据结构，OOP。
- 熟悉Java及常用JDK中数据结构的实现，熟悉JUC下的数据结构实现，jvm，NIO，多线程编程，Spring Boot。
- 熟悉MySQL，Mongodb，Redis，RabbitMQ，ElasticSearch等中间件。
- 熟悉分布式，微服务，分布式锁和分布式事务。

## 工作经历

### 币安（全球最大的数字货币交易所之一）（2020.3-至今）

#### 1、多维度名单服务

- S：现有很多服务需要使用黑白名单，规则较为复杂，且数据量大分散（各自服务都有自己实现），不便于管理。

- T：该项目负责统一黑白灰名单管理，支持10亿级以上的名单数据，5000+QPS，核心判断接口 P99 5ms内。

- A：

  - 由于数据量大，且具有复合结构，我研究并决定使用MongoDB存储，通过进一步了解MongoDB后，我采用 MongoDB 分片模式存储，采用3分片，每个分片2个备份，并使用UIDGenerator生成主键。

  - 由于MongoDB的嵌套文档索引性能在数据量大了后并不好，直接使用该索引接口耗时基本在上百ms，通过优化设计后，能使用单键索引进行核心的名单匹配，使其P99 在5ms内，能轻松支撑所需的QPS目标。
  - 集中数据时，部分源数据量大，并以CSV格式存放于文件服务里，需要通过定时JOB同步，由于不能有效探知线上数据具体的信息，故而遇到了OOM，通过优化，使用分批序列化批量插入解决。但又有一部分源数据，每次同步在几千万左右，但含有大量的重复，其每次有效数据在几万~10万左右，如果不去重会导致大量无效插入，我使用 RoaringBitMap进行数据精确过滤（缓存2000W左右的该数据，内存占用在2G左右），提升了该类数据的插入效率。
  - 使用UIDGenerator生成分布式主键时，由于默认的WorkerIdAssigner在重启服务一定次数后需要重置数据库，很不方便，而且我基于eurekaClient在每次服务重启的时候，读取当前有效的IP，并将work_node 表中无效的记录做一个回收，避免手动。

- R：通过不断优化，按照目标有效的实现了名单服务，并能支撑远超10亿级的数据，核心判断逻辑也能在5ms内完成，压测QPS能到10W+。

#### 2、Admin管理中台

- S：该项目是整个后台管理系统的中台，功能多，负责给600+的功能页面提供服务，主要给与运营使用。
- T：与同组同事负责该项目的基础公共功能开发和维护，并解决线上事故。
- A：
  - 由于该项目属于后台业务中台，很多团队都会进行业务开发，也导致了各种不好的线程池使用方式，从而线上出现过因为线程过多而导致的JVM占用容器内存过高被容器杀掉的现象，我通过分析监控，确定了该问题的根本在于线程过多，然后分析代码里所有的线程调用，找出了那些不规范使用的线程的地方进行整改，从而解决了该问题。
  - 由于开发团队多，出现了蛮多不太规范的代码，从而导致过登录串线问题，该问题的构成条件较为复杂，我通过分析整个请求链路，阅读SpringSession源码，添加filter打印 request response对象信息后发现，由于Tomcat中会复用Request对象，而又存在一些异步操作的接口通过上下文传递了当前request对象，使当前request回收cookies失效，从而当另一个请求使用了该对象就持有了上个请求的Cookies，从而导致了串号。再修改相关代码后该问题根治。
- R：该项目稳定运行，运营提出的问题和线上出现的问题能快速有效的解决。

### 嗨学网（2019.3-2020.3）

#### 1、C端登录认证
- 项目背景：该项目负责统一C端用户的统一认证和登录

- 项目角色：负责了认证部分功能，用户行为日志记录，二维码登录功能开发，项目的维护和对接。

- 项目技术：Spring Boot，Dubbo，Redis，MySQL，ElasticSearch，JWT，长轮训。

#### 2、内部端登录认证权限系统
- 项目背景：该项目负责内部员工系统的登录、权限控制等

- 项目角色：负责了功能权限的开发，集成端SDK开发，钉钉信息对接，功能对接。

- 项目技术：Spring Boot，Dubbo，MySQL。

### 点融网（2017.7～2019.1）

#### 1、数据聚合平台
- S：由于服务拆分后，有很多服务需要做一些聚合查询，或者查询大量其他服务数据，所以需要解耦各个系统间数据获取
- T：聚合不同系统的数据表，提供按SQL查询，解耦各个系统间的数据聚合查询。
- A：
  - 使用Otter近实时同步MySQL数据，实时性要求低的使用定时JOB同步数据，Oracle使用自研工具同步到MySQL。
  - 实现配置所需数据的SQL，使用API访问数据聚合平台，指定所需的数据Code，即可执行相应SQL获取所需数据。
  - 对于聚合查询，创建结果表，拆分聚合SQL，通过定时JOB分步执行后将结果聚集到结果表，业务方只需要查询单表即可。
  - 第二版设计中，我们采用数据模型的方式，将各个业务环节的数据按主业务ID串联后，存放于ElasticSearch中，并提供查询接口，业务方对接SDK即可方便获取到自己所需数据。
- R：该项目为大量的业务系统提供了便利的数据查询服务。

#### 2、People系统

- 项目背景：用于对用户集合进行标记分组的系统，方便于筛选各种特征用户用来做A/B TEST
- 项目角色：负责了该项目的部分功能开发，项目的维护和对接。
- 项目技术：Spring Boot，MySQL，ElasticSearch，Quartz，Redis。

### 成都云遥互动科技有限公司-抹茶美妆（2016.7～2017.7）

#### 1、抹茶美妆小程序版后端：
- S：小程序版的抹茶美妆展示Feed页，用户动态关注等功能。

- T：由于抹茶美妆用户量在百万级，因此需要存储大量的动态数据，并且支持快速查询自己的动态，关注的用户的动态。

- A：

  - 存储大量的动态数据并且为了方便按用户ID、动态ID检索，所以动态表按500W为一个范围分表，USER_ID和动态ID作为一个索引表，按USER_ID分表，动态表ID使用Redis维护一个全局ID。

  - 使用redis缓存每个用户所关注的人的动态ID（最多200个），这样就只用查询这些动态详情就很快了，而且每次一页只取20个ID。用过zset存储结构，保证动态ID有序，并以score作为分页标准。

  - 每个用户产生新的动态发送MQ消息，统一由MQ的消费者处理，将该用户所有的粉丝ID取出，将新的动态ID分别添加到每个用户在redis缓存的动态ID列表中。

- R：满足了产品对于动态模块的预计，并且存储量已达3000W+，动态展示效果良好。 
